<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Mobile Web AR - –î–æ–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å</title>
    
    <!-- –ú–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∫–∞–º–µ—Ä—ã -->
    <meta http-equiv="Permissions-Policy" content="camera=*, microphone=*">
    <meta http-equiv="Feature-Policy" content="camera *; microphone *">
    
    <!-- CDN –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å fallback -->
    <script>
        // –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ª–∞–¥–∫–∏
        window.debugAR = true;
        window.arErrors = [];
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ –æ—à–∏–±–∫–∏
        window.addEventListener('error', function(e) {
            const error = {
                message: e.message,
                filename: e.filename,
                lineno: e.lineno,
                colno: e.colno,
                stack: e.error ? e.error.stack : 'No stack'
            };
            window.arErrors.push(error);
            console.error('AR Error:', error);
            showDebugInfo('–û—à–∏–±–∫–∞: ' + e.message);
        });
        
        function showDebugInfo(message) {
            const debugDiv = document.getElementById('debugInfo');
            if (debugDiv) {
                debugDiv.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
                debugDiv.scrollTop = debugDiv.scrollHeight;
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
        function loadScript(src, callback) {
            const script = document.createElement('script');
            script.src = src;
            script.onload = function() {
                showDebugInfo('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω: ' + src);
                if (callback) callback();
            };
            script.onerror = function() {
                showDebugInfo('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + src);
                if (callback) callback(new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å ' + src));
            };
            document.head.appendChild(script);
        }
    </script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js" 
            onerror="showDebugInfo('‚ùå A-Frame –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω')"
            onload="showDebugInfo('‚úÖ A-Frame –∑–∞–≥—Ä—É–∂–µ–Ω')"></script>
    
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.min.js"
            onerror="showDebugInfo('‚ùå AR.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω')"
            onload="showDebugInfo('‚úÖ AR.js –∑–∞–≥—Ä—É–∂–µ–Ω')"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            -webkit-text-size-adjust: none;
        }
        
        /* –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
        #debugInfo {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            max-height: 150px;
            background: rgba(0, 0, 0, 0.9);
            color: #00ff00;
            font-family: monospace;
            font-size: 11px;
            padding: 10px;
            border-radius: 5px;
            overflow-y: auto;
            z-index: 1001;
            border: 1px solid #333;
        }
        
        #debugToggle {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            z-index: 1002;
        }
        
        .mobile-controls {
            position: fixed;
            bottom: 20px;
            left: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 999;
        }
        
        .mobile-btn {
            background: linear-gradient(145deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            touch-action: manipulation;
            flex: 1;
            min-width: 100px;
            max-width: 150px;
        }
        
        .mobile-btn:active {
            background: linear-gradient(145deg, #0056b3, #004085);
            transform: scale(0.98);
        }
        
        .mobile-btn:disabled {
            background: #6c757d;
            opacity: 0.6;
        }
        
        .mobile-status {
            position: fixed;
            top: 170px;
            left: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            z-index: 1000;
            font-size: 14px;
        }
        
        /* –°–∫—Ä—ã–≤–∞–µ–º –æ—Ç–ª–∞–¥–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        .debug-hidden {
            display: none;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è AR —Å—Ü–µ–Ω—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        a-scene {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
        }
        
        /* –ö—É—Ä—Å–æ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .mobile-cursor {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            border: 3px solid #fff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 998;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏ -->
    <button id="debugToggle" onclick="toggleDebug()">üêõ</button>
    
    <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div id="debugInfo" class="debug-hidden">
        <div>üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Mobile AR...</div>
    </div>
    
    <!-- –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="mobile-status" id="mobileStatus">
        üì± –ó–∞–≥—Ä—É–∑–∫–∞ AR –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...
    </div>
    
    <!-- –ú–æ–±–∏–ª—å–Ω—ã–π –∫—É—Ä—Å–æ—Ä -->
    <div class="mobile-cursor" id="mobileCursor"></div>
    
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <div class="mobile-controls">
        <button class="mobile-btn" id="mAddCube" disabled>üü• –ö—É–±</button>
        <button class="mobile-btn" id="mAddSphere" disabled>üîµ –°—Ñ–µ—Ä–∞</button>
        <button class="mobile-btn" id="mAddCylinder" disabled>üü¶ –¶–∏–ª–∏–Ω–¥—Ä</button>
        <button class="mobile-btn" id="mClear">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>

    <!-- AR —Å—Ü–µ–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <a-scene 
        id="arScene"
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3; trackingMethod: best;"
        renderer="logarithmicDepthBuffer: true; colorManagement: true; sortObjects: true; antialias: false; precision: mediump;"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        loading-screen="enabled: false"
        inspector="url: false;">
        
        <!-- –ê—Å—Å–µ—Ç—ã -->
        <a-assets>
            <!-- –ü—Ä–æ—Å—Ç—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
            <a-mixin id="mobile-cube-material" 
                     material="color: #ff6b6b; shader: flat;">
            </a-mixin>
            
            <a-mixin id="mobile-sphere-material" 
                     material="color: #4ecdc4; shader: flat;">
            </a-mixin>
            
            <a-mixin id="mobile-cylinder-material" 
                     material="color: #45b7d1; shader: flat;">
            </a-mixin>
        </a-assets>
        
        <!-- –ü—Ä–æ—Å—Ç–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <a-light type="ambient" color="#ffffff" intensity="0.8"></a-light>
        
        <!-- AR –∫–∞–º–µ—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <a-camera 
            gps-camera 
            rotation-reader 
            id="mobileCamera"
            look-controls-enabled="false"
            wasd-controls-enabled="false"
            position="0 1.6 0">
        </a-camera>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ -->
        <a-entity id="mobileContainer"></a-entity>
    </a-scene>

    <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è AR —Å–∫—Ä–∏–ø—Ç–∞ -->
    <script>
        // –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è AR –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        class MobileARApp {
            constructor() {
                this.scene = null;
                this.camera = null;
                this.container = null;
                this.objectCounter = 0;
                this.isInitialized = false;
                this.placementMode = 'cube';
                this.objects = [];
                this.lastTouch = null;
                
                // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                this.statusElement = document.getElementById('mobileStatus');
                this.cubeBtn = document.getElementById('mAddCube');
                this.sphereBtn = document.getElementById('mAddSphere');
                this.cylinderBtn = document.getElementById('mAddCylinder');
                this.clearBtn = document.getElementById('mClear');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
                this.init();
            }
            
            async init() {
                try {
                    showDebugInfo('üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ A-Frame...');
                    await this.waitForAFrame();
                    
                    showDebugInfo('üîÑ –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ü–µ–Ω—ã...');
                    this.scene = document.querySelector('#arScene');
                    this.camera = document.querySelector('#mobileCamera');
                    this.container = document.querySelector('#mobileContainer');
                    
                    showDebugInfo('üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π...');
                    this.setupEventListeners();
                    
                    showDebugInfo('üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ AR...');
                    await this.waitForARReady();
                    
                    this.updateStatus('‚úÖ AR –≥–æ—Ç–æ–≤! –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç –∏ –∫–æ—Å–Ω–∏—Ç–µ—Å—å —ç–∫—Ä–∞–Ω–∞');
                    this.enableControls();
                    this.isInitialized = true;
                    
                    showDebugInfo('‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
                    
                } catch (error) {
                    showDebugInfo('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ' + error.message);
                    this.updateStatus('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
                }
            }
            
            waitForAFrame() {
                return new Promise((resolve, reject) => {
                    const checkAFrame = () => {
                        if (window.AFRAME) {
                            showDebugInfo('‚úÖ A-Frame –¥–æ—Å—Ç—É–ø–µ–Ω');
                            resolve();
                        } else if (document.readyState === 'complete') {
                            setTimeout(checkAFrame, 100);
                        } else {
                            window.addEventListener('load', checkAFrame);
                        }
                    };
                    checkAFrame();
                    
                    // –¢–∞–π–º–∞—É—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è
                    setTimeout(() => {
                        if (!window.AFRAME) {
                            reject(new Error('A-Frame –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω'));
                        }
                    }, 10000);
                });
            }
            
            waitForARReady() {
                return new Promise((resolve) => {
                    if (this.scene.hasLoaded) {
                        resolve();
                    } else {
                        this.scene.addEventListener('loaded', resolve);
                        // –†–µ–∑–µ—Ä–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä
                        setTimeout(resolve, 5000);
                    }
                });
            }
            
            setupEventListeners() {
                // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                this.cubeBtn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.setPlacementMode('cube');
                });
                
                this.sphereBtn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.setPlacementMode('sphere');
                });
                
                this.cylinderBtn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.setPlacementMode('cylinder');
                });
                
                this.clearBtn.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.clearAllObjects();
                });
                
                // –°–µ–Ω—Å–æ—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
                this.scene.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    this.handlePlacement(e);
                });
                
                // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∑—É–º –∏ –ø—Ä–æ–∫—Ä—É—Ç–∫—É
                document.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                }, { passive: false });
                
                document.addEventListener('gesturestart', (e) => {
                    e.preventDefault();
                });
            }
            
            setPlacementMode(mode) {
                this.placementMode = mode;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
                [this.cubeBtn, this.sphereBtn, this.cylinderBtn].forEach(btn => {
                    btn.style.background = 'linear-gradient(145deg, #007bff, #0056b3)';
                });
                
                if (mode === 'cube') this.cubeBtn.style.background = 'linear-gradient(145deg, #28a745, #1e7e34)';
                if (mode === 'sphere') this.sphereBtn.style.background = 'linear-gradient(145deg, #28a745, #1e7e34)';
                if (mode === 'cylinder') this.cylinderBtn.style.background = 'linear-gradient(145deg, #28a745, #1e7e34)';
                
                this.updateStatus(`üìç –†–µ–∂–∏–º: ${this.getModeText(mode)}. –ö–æ—Å–Ω–∏—Ç–µ—Å—å —ç–∫—Ä–∞–Ω–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è`);
                showDebugInfo('üéØ –†–µ–∂–∏–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è: ' + mode);
            }
            
            getModeText(mode) {
                const modes = {
                    'cube': '–†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫—É–±–∞',
                    'sphere': '–†–∞–∑–º–µ—â–µ–Ω–∏–µ —Å—Ñ–µ—Ä—ã',
                    'cylinder': '–†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ü–∏–ª–∏–Ω–¥—Ä–∞'
                };
                return modes[mode] || mode;
            }
            
            handlePlacement(event) {
                if (!this.isInitialized || !this.placementMode) return;
                
                showDebugInfo('üëÜ –ö–∞—Å–∞–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ');
                
                const position = this.calculatePlacementPosition();
                if (position) {
                    this.placeObject(this.placementMode, position);
                } else {
                    showDebugInfo('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é');
                }
            }
            
            calculatePlacementPosition() {
                try {
                    const cameraEl = this.camera;
                    const cameraPosition = cameraEl.getAttribute('position');
                    const cameraRotation = cameraEl.getAttribute('rotation');
                    
                    const distance = 1.5; // –ú–µ—Ç—Ä–æ–≤ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π
                    const radY = (cameraRotation.y * Math.PI) / 180;
                    
                    const x = cameraPosition.x + Math.sin(radY) * distance;
                    const z = cameraPosition.z - Math.cos(radY) * distance;
                    const y = cameraPosition.y - 0.3;
                    
                    showDebugInfo(`üìç –ü–æ–∑–∏—Ü–∏—è: x=${x.toFixed(2)}, y=${y.toFixed(2)}, z=${z.toFixed(2)}`);
                    return { x, y, z };
                } catch (error) {
                    showDebugInfo('‚ùå –û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏: ' + error.message);
                    return null;
                }
            }
            
            placeObject(type, position) {
                try {
                    const objectId = `mobile_${type}_${this.objectCounter++}`;
                    
                    const objectEl = document.createElement('a-entity');
                    objectEl.setAttribute('id', objectId);
                    objectEl.classList.add('mobile-ar-object');
                    
                    this.setupMobileObjectGeometry(objectEl, type);
                    objectEl.setAttribute('position', `${position.x} ${position.y} ${position.z}`);
                    
                    // –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
                    objectEl.setAttribute('animation', {
                        property: 'scale',
                        from: '0 0 0',
                        to: '0.3 0.3 0.3',
                        dur: 300
                    });
                    
                    this.container.appendChild(objectEl);
                    
                    this.objects.push({
                        id: objectId,
                        type: type,
                        element: objectEl,
                        position: position,
                        timestamp: Date.now()
                    });
                    
                    this.updateStatus(`‚úÖ ${this.getModeText(type)} —Ä–∞–∑–º–µ—â–µ–Ω! –û–±—ä–µ–∫—Ç–æ–≤: ${this.objects.length}`);
                    showDebugInfo('‚úÖ –û–±—ä–µ–∫—Ç —Ä–∞–∑–º–µ—â–µ–Ω: ' + type);
                    
                } catch (error) {
                    showDebugInfo('‚ùå –û—à–∏–±–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è: ' + error.message);
                    this.updateStatus('‚ùå –û—à–∏–±–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞');
                }
            }
            
            setupMobileObjectGeometry(element, type) {
                const scale = 0.3;
                
                switch (type) {
                    case 'cube':
                        element.setAttribute('geometry', {
                            primitive: 'box',
                            width: scale,
                            height: scale,
                            depth: scale
                        });
                        element.setAttribute('mixin', 'mobile-cube-material');
                        break;
                        
                    case 'sphere':
                        element.setAttribute('geometry', {
                            primitive: 'sphere',
                            radius: scale * 0.5
                        });
                        element.setAttribute('mixin', 'mobile-sphere-material');
                        break;
                        
                    case 'cylinder':
                        element.setAttribute('geometry', {
                            primitive: 'cylinder',
                            radius: scale * 0.4,
                            height: scale
                        });
                        element.setAttribute('mixin', 'mobile-cylinder-material');
                        break;
                }
            }
            
            clearAllObjects() {
                try {
                    this.objects.forEach(obj => {
                        if (obj.element && obj.element.parentNode) {
                            obj.element.parentNode.removeChild(obj.element);
                        }
                    });
                    
                    this.objects = [];
                    this.updateStatus('üóëÔ∏è –í—Å–µ –æ–±—ä–µ–∫—Ç—ã —É–¥–∞–ª–µ–Ω—ã');
                    showDebugInfo('üóëÔ∏è –û–±—ä–µ–∫—Ç—ã –æ—á–∏—â–µ–Ω—ã');
                    
                } catch (error) {
                    showDebugInfo('‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏: ' + error.message);
                }
            }
            
            updateStatus(message) {
                if (this.statusElement) {
                    this.statusElement.textContent = message;
                }
            }
            
            enableControls() {
                this.cubeBtn.disabled = false;
                this.sphereBtn.disabled = false;
                this.cylinderBtn.disabled = false;
                this.setPlacementMode('cube');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–ª–∞–¥–∫–∏
        function toggleDebug() {
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.classList.toggle('debug-hidden');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–≥–¥–∞ –≤—Å–µ –≥–æ—Ç–æ–≤–æ
        document.addEventListener('DOMContentLoaded', () => {
            showDebugInfo('üì± DOM –≥–æ—Ç–æ–≤, –∑–∞–ø—É—Å–∫ Mobile AR...');
            window.mobileAR = new MobileARApp();
        });
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        function showErrors() {
            console.log('AR Errors:', window.arErrors);
            alert('–û—à–∏–±–∫–∏: ' + JSON.stringify(window.arErrors, null, 2));
        }
    </script>
</body>
</html> 